#!/usr/bin/env sh

amount=${2:-10}

case "$1" in
  inc)
    pactl set-sink-volume @DEFAULT_SINK@ +"$amount"% && polybar-msg hook mvol 1
    vol=$(pactl get-sink-volume @DEFAULT_SINK@ | awk -F ' / ' '{print $2}' | tr -cd '[:digit:][=%=]')
    notify-send "Volume" -t 2000 -i audio-speakers-symbolic -h int:value:"$vol"
    ;;
  dec)
    pactl set-sink-volume @DEFAULT_SINK@ -"$amount"% && polybar-msg hook mvol 1
    vol=$(pactl get-sink-volume @DEFAULT_SINK@ | awk -F ' / ' '{print $2}' | tr -cd '[:digit:][=%=]')
    notify-send "Volume" -t 2000 -i audio-speakers-symbolic -h int:value:"$vol"
    ;;
  toggle)
    pactl set-sink-mute @DEFAULT_SINK@ toggle
    ;;
  *)
    echo "Program requires arguement inc,dec,toggle"
    exit 1
    ;;
esac

polybar-msg hook mvol 1
pkill -RTMIN+2 bliss
kill -56 $(pidof dwmblocks)
