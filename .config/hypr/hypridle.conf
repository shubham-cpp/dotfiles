# vim:filetype=hyprlang
general {
  lock_cmd = pidof hyprlock || hyprlock       # Launch hyprlock for locking (avoids duplicates if already running).
  before_sleep_cmd = loginctl lock-session    # Automatically lock before any suspend/sleep event.
  after_sleep_cmd = hyprctl dispatch dpms on  # Turn screens back on after resuming from sleep.
  ignore_dbus_inhibit = false                 # Respect idle inhibitors from apps like browsers (change to true if needed).
}

# Optional: Dim screen brightness before locking (e.g., after 2.5 minutes).
listener {
  timeout = 150
  on-timeout = brightnessctl -s set 10        # Dim monitor to 10% (requires brightnessctl package).
  on-resume = brightnessctl -r                # Restore brightness on activity.
}

# Lock the screen after 5 minutes of inactivity.
listener {
  timeout = 300
  on-timeout = loginctl lock-session          # Trigger the lock via systemd-logind, which runs the lock_cmd above.
}

# Optional: Turn off screens (DPMS) shortly after locking to save power.
listener {
  timeout = 330
  on-timeout = hyprctl dispatch dpms off      # Turn off displays.
  on-resume = hyprctl dispatch dpms on        # Turn on displays on activity.
}

# Suspend after total 15 minutes of inactivity (i.e., 10 minutes after lock, if inactivity continues).
listener {
  timeout = 900
  on-timeout = systemctl suspend              # Suspend the system (requires systemd).
}
